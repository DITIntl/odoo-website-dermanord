<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

<!--
        <template id="breadcrumb_dermanord" inherit_id="website.layout">
            <xpath expr="//t[@t-raw='0']" position="before">
                <t t-if="not no_breadcrumb and website">
                    <t t-raw="website.get_breadcrumb(request.httprequest.path)"/>
                </t>
            </xpath>
        </template>
-->

        <template id="view_type" name="View Type">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="col-md-8 col-sm-8"/>
                <div class="col-md-4 col-sm-4 col-xs-12">
                    <form action="/resellers?view=map" method="post" class="col-md-4 col-sm-4 col-xs-12">
                        <t t-foreach="request.session.get('form_values').iteritems()" t-as="item">
                            <t t-if="item[0] not in ['post_form', 'view']">
                                <input t-att-name="item[0]" t-att-value="item[1]" type="hidden"/>
                            </t>
                        </t>
                        <input name="view" value="map" type="hidden"/>
                        <button class="mt16 dn_btn dn_primary" type="submit"><i class="fa fa-map-marker"/></button>
                    </form>
                    <form action="/resellers?view=city" method="post" class="col-md-4 col-sm-4 col-xs-12">
                        <t t-foreach="request.session.get('form_values').iteritems()" t-as="item">
                            <t t-if="item[0] not in ['post_form', 'view']">
                                <input t-att-name="item[0]" t-att-value="item[1]" type="hidden"/>
                            </t>
                        </t>
                        <input name="view" value="city" type="hidden"/>
                        <button class="mt16 dn_btn dn_primary" type="submit"><i class="fa fa-building"/></button>
                    </form>
                    <form action="/resellers?view=country" method="post" class="col-md-4 col-sm-4 col-xs-12">
                        <t t-foreach="request.session.get('form_values').iteritems()" t-as="item">
                            <t t-if="item[0] not in ['post_form', 'view']">
                                <input t-att-name="item[0]" t-att-value="item[1]" type="hidden"/>
                            </t>
                        </t>
                        <input name="view" value="country" type="hidden"/>
                        <button class="mt16 dn_btn dn_primary" type="submit"><i class="fa fa-flag"/></button>
                    </form>
                </div>
            </div>
        </template>

        <template id="resellers" name="Resellers">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure"/>
                    <div class="col-md-12 col-sm-12 col-xs-12" style="padding: 0px;">
                        <img alt="Odoo CMS - a big picture" class="img img-responsive" src="/website/static/src/img/library/ipad.png" style="margin: 0 auto; width: 100%;"/>
                    </div>
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12 mb16">
                                <form action="/resellers" method="post" class="pagination form-inline col-md-12 col-sm-12 col-xs-12 mb16">
                                    <div class="container text-center">
                                        <div class="input-group">
                                            <input name="search" class="form-control" placeholder="Search..." type="text"/>
                                            <span class="input-group-btn">
                                                <button type="submit" class="btn btn-default">
                                                    <i class="fa fa-search" />
                                                </button>
                                            </span>
                                        </div>
                                    </div>
                                </form>
                                <div class="col-md-12 col-sm-12 col-xs-12 mb16">
                                    <div class="grid">
                                        <t t-if="resellers">
                                            <t t-foreach="resellers" t-as="reseller">
                                                <div class="reseller_cell grid-item" style="width: 33.333%;">
                                                    <a t-att-href="'/reseller/%s' %reseller.id"><h4><strong><t t-esc="reseller.brand_name if reseller.brand_name else reseller.name"/></strong></h4></a>
                                                    <!--<p class="text-muted"><t t-esc="','.join(reseller.category_id.mapped('name'))"/></p>-->
                                                    <p>
                                                        <t t-if="reseller.street"><span t-esc="reseller.street"/><br/></t>
                                                        <t t-if="reseller.street2"><span t-esc="reseller.street2"/><br/></t>
                                                        <t t-if="reseller.zip"><span t-esc="reseller.zip"/></t> <t t-if="reseller.city"><span t-esc="reseller.city"/><br/></t>
                                                        <t t-if="reseller.country_id"><span t-esc="reseller.country_id.name"/></t>
                                                    </p>
                                                    <t t-if="reseller.email"><p style="text-decoration: underline;"><a t-att-href="'mailto:%s' %reseller.email"><span t-esc="reseller.email"/></a></p></t>
                                                    <t t-if="reseller.phone"><p><a t-att-href="'tel:%s' %reseller.phone"><span t-esc="reseller.phone"/></a></p></t>
                                                    <t t-if="reseller.website"><p style="text-decoration: underline;"><a t-att-href="reseller.website"><span t-esc="reseller.website"/></a></p></t>
                                                </div>
                                            </t>
                                        </t>
<!--
                                        <t t-if="not resellers">
                                            <h3 class="text-center">No reseller found</h3>
                                        </t>
-->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_structure"/>
            </t>
        </template>

        <template id="reseller" name="Reseller">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure"/>
                    <div class="col-md-12 col-sm-12 col-xs-12" style="background-color: #000;">
<!--
                        <span itemprop="image" t-field="reseller.top_image" t-field-options='{"widget": "image", "class": "css_non_editable_mode_hidden", "alt-field": "name"}'/>
-->
                        <img alt="Odoo CMS - a big picture" class="img img-responsive css_editable_mode_hidden" t-att-src="'/imagefield/res.partner/top_image/%s/ref/reseller_dermanord.reseller_top_image' %reseller.id" style="margin: auto;"/>
                    </div>
                    <div class="container">
                        <div class="row">
                            <div class="col-md-8 col-sm-8 col-xs-12 mb16">
                                <div id="reseller_description_div" class="mt32">
                                    <p t-raw="reseller.website_short_description"/>
                                    <p class="read-more"><a href="#" class="button">Read More</a></p>
                                </div>
                                <t t-if="len(reseller.child_competence_ids) != 0">
                                    <h3>Our competences</h3>
                                    <ul t-foreach="reseller.child_competence_ids.split(',')" t-as="categ">
                                        <li><span t-esc="categ"/></li>
                                    </ul>
                                </t>
                            </div>
                            <div class="reseller_cell col-md-4 col-sm-4 col-xs-12 mb16">
                                <h1><t t-esc="reseller.brand_name if reseller.brand_name else reseller.name"/></h1>
                                <!-- Google maps -->
                                <div id="map" class="mt16" style="width: 100%; height: 400px;"></div>
                                <hr/>
                                <h4 class="dn_uppercase">Address</h4>
                                <p>
                                    <t t-if="reseller.street"><span t-esc="reseller.street"/><br/></t>
                                    <t t-if="reseller.street2"><span t-esc="reseller.street2"/><br/></t>
                                    <t t-if="reseller.zip"><span t-esc="reseller.zip"/></t> <t t-if="reseller.city"><span t-esc="reseller.city"/><br/></t>
                                    <t t-if="reseller.country_id"><span t-esc="reseller.country_id.name"/></t>
                                </p>
                                <hr/>
                                <h4 class="dn_uppercase">Opening hours</h4>
                                    <p>Mon: <span t-esc="reseller.opening_hours_ids[0].opening_hours if len(reseller.opening_hours_ids) &gt; 0 else None"/></p>
                                    <p>Tue: <span t-esc="reseller.opening_hours_ids[1].opening_hours if len(reseller.opening_hours_ids) &gt; 1 else None"/></p>
                                    <p>Wed: <span t-esc="reseller.opening_hours_ids[2].opening_hours if len(reseller.opening_hours_ids) &gt; 2 else None"/></p>
                                    <p>Thu: <span t-esc="reseller.opening_hours_ids[3].opening_hours if len(reseller.opening_hours_ids) &gt; 3 else None"/></p>
                                    <p>Fri: <span t-esc="reseller.opening_hours_ids[4].opening_hours if len(reseller.opening_hours_ids) &gt; 4 else None"/></p>
                                    <p>Sat: <span t-esc="reseller.opening_hours_ids[5].opening_hours if len(reseller.opening_hours_ids) &gt; 5 else None"/></p>
                                    <p>Sun: <span t-esc="reseller.opening_hours_ids[6].opening_hours if len(reseller.opening_hours_ids) &gt; 6 else None"/></p>
                                <hr/>
                                <h4 class="dn_uppercase">Contact</h4>
                                <p>
                                    <t t-if="reseller.phone">Telephone: <a t-att-href="'tel:%s' %reseller.phone"><span t-esc="reseller.phone"/></a><br/></t>
                                    <t t-if="reseller.email">Email: <a t-att-href="'mailto:%s' %reseller.email"><span t-esc="reseller.email"/></a><br/></t>
                                    <t t-if="reseller.website">Website: <a t-att-href="reseller.website"><span t-esc="reseller.website"/></a></t>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_structure"/>
                <script>
                    <t t-esc="reseller_geo"/>
                </script>
<!--
                <script>
                  function initMap() {
                    var sweden = {lat: 59.6144081, lng: 17.7168579};
                    var map = new google.maps.Map(document.getElementById('map'), {
                      zoom: 4,
                      center: sweden
                    });
                    <t t-foreach="resellers_geo" t-as="geo"><t t-raw="geo"/></t>
                  }
                </script>
-->
                <script t-att-src="'https://maps.googleapis.com/maps/api/js?key=%s&amp;callback=initMap' %request.env['ir.config_parameter'].get_param('google_maps_api')"></script>
            </t>
        </template>

        <template id="home_page" inherit_id="website_sale_home.home_page" name="Home Page Inherited Reseller Dermanord">
            <xpath expr="//form/div[@class='form-group'][last()]" position="before">
                <t t-if="home_user.partner_id.commercial_partner_id.is_reseller">
                    <div class="form-group">
                        <label class="col-md-3 col-sm-4 control-label" for="brand_name">Brand Name</label>
                        <div class="col-md-7 col-sm-8">
                            <input id="brand_name" type="text" class="form-control" name="brand_name" placeholder="Brand Name..." t-att-value="home_user.partner_id.commercial_partner_id.brand_name" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 col-sm-4 control-label" for="website_short_description">Website Description</label>
                        <div class="col-md-7 col-sm-8">
                            <textarea id="website_short_description" type="text" class="form-control" name="website_short_description" placeholder="Website Description..." rows="10" cols="70" ><t t-raw="home_user.partner_id.commercial_partner_id.website_short_description"/></textarea>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 col-sm-4 control-label" for="top_image">Top Image</label>
                        <div class="col-md-7 col-sm-8">
                            <input id="top_image" type="file" name="top_image" accept="image/*" capture="camera"/>
                            <t t-if="home_user.partner_id.commercial_partner_id.top_image"><img t-att-src="'/imagefield/res.partner/top_image/%s/ref/reseller_dermanord.reseller_top_image' %home_user.partner_id.commercial_partner_id.id" style="max-width: 200px;"/></t>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 col-sm-4 control-label" for="top_image">Opening Hours</label>
                        <div class="col-md-7 col-sm-8">
                            <table class="table table-striped">
                                <thead>
                                    <th>Weekday</th>
                                    <th>Open Time</th>
                                    <th>Close Time</th>
                                    <th>Break Start</th>
                                    <th>Break Stop</th>
                                    <th>Close</th>
                                </thead>
                                <tbody>
                                    <tr>
                                        <t t-set="monday" t-value="home_user.partner_id.commercial_partner_id.opening_hours_ids.filtered(lambda o: o.dayofweek == 'monday')"/>
                                        <td>Monday:</td>
                                        <td><input type="number" class="form-control" name="monday_open_time" step="0.01" t-att-value="website.get_float_time(monday.open_time)" /></td>
                                        <td><input type="number" class="form-control" name="monday_close_time" step="0.01" t-att-value="website.get_float_time(monday.close_time)" /></td>
                                        <td><input type="number" class="form-control" name="monday_break_start" step="0.01" t-att-value="website.get_float_time(monday.break_start)" /></td>
                                        <td><input type="number" class="form-control" name="monday_break_stop" step="0.01" t-att-value="website.get_float_time(monday.break_stop)" /></td>
                                        <td><input type="checkbox" name="monday_close" value="1" t-att="{'checked': 1} if monday.close else {}"/></td>
                                    </tr>
                                    <tr>
                                        <t t-set="tuesday" t-value="home_user.partner_id.commercial_partner_id.opening_hours_ids.filtered(lambda o: o.dayofweek == 'tuesday')"/>
                                        <td>Tuesday:</td>
                                        <td><input type="number" class="form-control" name="tuesday_open_time" step="0.01" t-att-value="website.get_float_time(tuesday.open_time)" /></td>
                                        <td><input type="number" class="form-control" name="tuesday_close_time" step="0.01" t-att-value="website.get_float_time(tuesday.close_time)" /></td>
                                        <td><input type="number" class="form-control" name="tuesday_break_start" step="0.01" t-att-value="website.get_float_time(tuesday.break_start)" /></td>
                                        <td><input type="number" class="form-control" name="tuesday_break_stop" step="0.01" t-att-value="website.get_float_time(tuesday.break_stop)" /></td>
                                        <td><input type="checkbox" name="tuesday_close" value="1" t-att="{'checked': 1} if tuesday.close else {}"/></td>
                                    </tr>
                                    <tr>
                                        <t t-set="wednesday" t-value="home_user.partner_id.commercial_partner_id.opening_hours_ids.filtered(lambda o: o.dayofweek == 'wednesday')"/>
                                        <td>Wednesday:</td>
                                        <td><input type="number" class="form-control" name="wednesday_open_time" step="0.01" t-att-value="website.get_float_time(wednesday.open_time)" /></td>
                                        <td><input type="number" class="form-control" name="wednesday_close_time" step="0.01" t-att-value="website.get_float_time(wednesday.close_time)" /></td>
                                        <td><input type="number" class="form-control" name="wednesday_break_start" step="0.01" t-att-value="website.get_float_time(wednesday.break_start)" /></td>
                                        <td><input type="number" class="form-control" name="wednesday_break_stop" step="0.01" t-att-value="website.get_float_time(wednesday.break_stop)" /></td>
                                        <td><input type="checkbox" name="wednesday_close" value="1" t-att="{'checked': 1} if wednesday.close else {}"/></td>
                                    </tr>
                                    <tr>
                                        <t t-set="thursday" t-value="home_user.partner_id.commercial_partner_id.opening_hours_ids.filtered(lambda o: o.dayofweek == 'thursday')"/>
                                        <td>Thursday:</td>
                                        <td><input type="number" class="form-control" name="thursday_open_time" step="0.01" t-att-value="website.get_float_time(thursday.open_time)" /></td>
                                        <td><input type="number" class="form-control" name="thursday_close_time" step="0.01" t-att-value="website.get_float_time(thursday.close_time)" /></td>
                                        <td><input type="number" class="form-control" name="thursday_break_start" step="0.01" t-att-value="website.get_float_time(thursday.break_start)" /></td>
                                        <td><input type="number" class="form-control" name="thursday_break_stop" step="0.01" t-att-value="website.get_float_time(thursday.break_stop)" /></td>
                                        <td><input type="checkbox" name="thursday_close" value="1" t-att="{'checked': 1} if thursday.close else {}"/></td>
                                    </tr>
                                    <tr>
                                        <t t-set="friday" t-value="home_user.partner_id.commercial_partner_id.opening_hours_ids.filtered(lambda o: o.dayofweek == 'friday')"/>
                                        <td>Friday:</td>
                                        <td><input type="number" class="form-control" name="friday_open_time" step="0.01" t-att-value="website.get_float_time(friday.open_time)" /></td>
                                        <td><input type="number" class="form-control" name="friday_close_time" step="0.01" t-att-value="website.get_float_time(friday.close_time)" /></td>
                                        <td><input type="number" class="form-control" name="friday_break_start" step="0.01" t-att-value="website.get_float_time(friday.break_start)" /></td>
                                        <td><input type="number" class="form-control" name="friday_break_stop" step="0.01" t-att-value="website.get_float_time(friday.break_stop)" /></td>
                                        <td><input type="checkbox" name="friday_close" value="1" t-att="{'checked': 1} if friday.close else {}"/></td>
                                    </tr>
                                    <tr>
                                        <t t-set="saturday" t-value="home_user.partner_id.commercial_partner_id.opening_hours_ids.filtered(lambda o: o.dayofweek == 'saturday')"/>
                                        <td>Saturday:</td>
                                        <td><input type="number" class="form-control" name="saturday_open_time" step="0.01" t-att-value="website.get_float_time(saturday.open_time)" /></td>
                                        <td><input type="number" class="form-control" name="saturday_close_time" step="0.01" t-att-value="website.get_float_time(saturday.close_time)" /></td>
                                        <td><input type="number" class="form-control" name="saturday_break_start" step="0.01" t-att-value="website.get_float_time(saturday.break_start)" /></td>
                                        <td><input type="number" class="form-control" name="saturday_break_stop" step="0.01" t-att-value="website.get_float_time(saturday.break_stop)" /></td>
                                        <td><input type="checkbox" name="saturday_close" value="1" t-att="{'checked': 1} if saturday.close else {}"/></td>
                                    </tr>
                                    <tr>
                                        <t t-set="sunday" t-value="home_user.partner_id.commercial_partner_id.opening_hours_ids.filtered(lambda o: o.dayofweek == 'sunday')"/>
                                        <td>Sunday:</td>
                                        <td><input type="number" class="form-control" name="sunday_open_time" step="0.01" t-att-value="website.get_float_time(sunday.open_time)" /></td>
                                        <td><input type="number" class="form-control" name="sunday_close_time" step="0.01" t-att-value="website.get_float_time(sunday.close_time)" /></td>
                                        <td><input type="number" class="form-control" name="sunday_break_start" step="0.01" t-att-value="website.get_float_time(sunday.break_start)" /></td>
                                        <td><input type="number" class="form-control" name="sunday_break_stop" step="0.01" t-att-value="website.get_float_time(sunday.break_stop)" /></td>
                                        <td><input type="checkbox" name="sunday_close" value="1" t-att="{'checked': 1} if sunday.close else {}"/></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </t>
            </xpath>
        </template>

        <template id="resellers_city" name="Resellers City">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure"/>
                    <div class="container">
                        <div class="row">
                            <t t-call="reseller_dermanord.view_type"/>
                            <div class="col-md-12 col-sm-12 col-xs-12 mb16">
                                <t t-if="len(cities) &gt; 0">
                                    <t t-foreach="cities" t-as="city">
                                        <div class="col-md-4 col-sm-4 col-xs-12">
                                            <h4><strong><t t-esc="city"/></strong></h4>
                                            <t t-foreach="resellers.with_context({'city': city}).filtered(lambda p: p.city == p._context.get('city'))" t-as="reseller">
                                                <a t-att-href="'/reseller/%s' %reseller.id">
                                                    <p t-esc="reseller.name"/>
                                                </a>
                                            </t>
                                        </div>
                                    </t>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_structure"/>
            </t>
        </template>

        <template id="resellers_country" name="Resellers Country">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure"/>
                    <div class="container">
                        <div class="row">
                            <t t-call="reseller_dermanord.view_type"/>
                            <div class="col-md-12 col-sm-12 col-xs-12 mb16">
                                <t t-if="len(countries) &gt; 0">
                                    <t t-foreach="countries" t-as="country_id">
                                        <div class="col-md-4 col-sm-4 col-xs-12">
                                            <h4><strong><t t-esc="country_id.name"/></strong></h4>
                                            <t t-foreach="resellers.with_context({'country_id': country_id}).filtered(lambda p: p.country_id == p._context.get('country_id'))" t-as="reseller">
                                                <a t-att-href="'/reseller/%s' %reseller.id">
                                                    <p t-esc="reseller.name"/>
                                                </a>
                                            </t>
                                        </div>
                                    </t>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_structure"/>
            </t>
        </template>

        <template id="customize_css_js" inherit_id="website.layout" name="Customize CSS JS">
            <!-- Customize css -->
            <xpath expr="//t[@t-call-assets='website.assets_frontend']" position="after">
                <link href="/reseller_dermanord/static/src/css/main.css" rel="stylesheet" />
            </xpath>
            <!-- Customize javascript -->
            <xpath expr="//body" position="inside">
                <script type="text/javascript" src="/reseller_dermanord/static/src/js/main.js" />
            </xpath>
        </template>

    </data>
</openerp>
