<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

<!--
        <template id="breadcrumb_dermanord" inherit_id="website.layout">
            <xpath expr="//t[@t-raw='0']" position="before">
                <t t-if="not no_breadcrumb and website">
                    <t t-raw="website.get_breadcrumb(request.httprequest.path)"/>
                </t>
            </xpath>
        </template>
-->

        <template id="view_type" name="View Type">
            <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="col-md-8 col-sm-8"/>
                <div class="col-md-4 col-sm-4 col-xs-12">
                    <form action="/resellers?view=map" method="post" class="col-md-4 col-sm-4 col-xs-12">
                        <t t-foreach="request.session.get('form_values').iteritems()" t-as="item">
                            <t t-if="item[0] not in ['post_form', 'view']">
                                <input t-att-name="item[0]" t-att-value="item[1]" type="hidden"/>
                            </t>
                        </t>
                        <input name="view" value="map" type="hidden"/>
                        <button class="mt16 dn_btn dn_primary" type="submit"><i class="fa fa-map-marker"/></button>
                    </form>
                    <form action="/resellers?view=city" method="post" class="col-md-4 col-sm-4 col-xs-12">
                        <t t-foreach="request.session.get('form_values').iteritems()" t-as="item">
                            <t t-if="item[0] not in ['post_form', 'view']">
                                <input t-att-name="item[0]" t-att-value="item[1]" type="hidden"/>
                            </t>
                        </t>
                        <input name="view" value="city" type="hidden"/>
                        <button class="mt16 dn_btn dn_primary" type="submit"><i class="fa fa-building"/></button>
                    </form>
                    <form action="/resellers?view=country" method="post" class="col-md-4 col-sm-4 col-xs-12">
                        <t t-foreach="request.session.get('form_values').iteritems()" t-as="item">
                            <t t-if="item[0] not in ['post_form', 'view']">
                                <input t-att-name="item[0]" t-att-value="item[1]" type="hidden"/>
                            </t>
                        </t>
                        <input name="view" value="country" type="hidden"/>
                        <button class="mt16 dn_btn dn_primary" type="submit"><i class="fa fa-flag"/></button>
                    </form>
                </div>
            </div>
        </template>

        <template id="resellers" name="Resellers">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure"/>
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12 mb16">
                                <form action="/resellers" method="post" class="pagination form-inline col-md-12 col-sm-12 col-xs-12 mb16">
                                    <div class="container text-center">
                                        <div class="input-group">
                                            <input name="search" class="form-control" placeholder="Search..." type="text"/>
                                            <span class="input-group-btn">
                                                <button type="submit" class="btn btn-default">
                                                    <i class="fa fa-search" />
                                                </button>
                                            </span>
                                        </div>
                                    </div>
                                </form>
                                <div class="col-md-12 col-sm-12 col-xs-12">
                                    <t t-if="resellers">
                                        <t t-foreach="resellers" t-as="reseller">
                                            <div class="reseller_cell col-md-4 col-sm-4 col-xs-12">
                                                <a t-att-href="'/reseller/%s' %reseller.id"><h4><strong><t t-esc="reseller.name"/></strong></h4></a>
                                                <!--<p class="text-muted"><t t-esc="','.join(reseller.category_id.mapped('name'))"/></p>-->
                                                <p>
                                                    <t t-if="reseller.street"><span t-esc="reseller.street"/><br/></t>
                                                    <t t-if="reseller.street2"><span t-esc="reseller.street2"/><br/></t>
                                                    <t t-if="reseller.zip"><span t-esc="reseller.zip"/></t> <t t-if="reseller.city"><span t-esc="reseller.city"/><br/></t>
                                                    <t t-if="reseller.country_id"><span t-esc="reseller.country_id.name"/></t>
                                                </p>
                                                <t t-if="reseller.email"><a t-att-href="'mailto:%s' %reseller.email"><p style="text-decoration: underline;"><span t-esc="reseller.email"/></p></a></t>
                                                <t t-if="reseller.phone"><a t-att-href="'tel:%s' %reseller.phone"><p><span t-esc="reseller.phone"/></p></a></t>
                                                <t t-if="reseller.website"><a t-att-href="reseller.website"><p style="text-decoration: underline;"><span t-esc="reseller.website"/></p></a></t>
                                            </div>
                                        </t>
                                    </t>
<!--
                                    <t t-if="not resellers">
                                        <h3 class="text-center">No reseller found</h3>
                                    </t>
-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_structure"/>
            </t>
        </template>

        <template id="reseller" name="Reseller">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure"/>
                    <div class="container">
                        <div class="row">
                            <div class="col-md-12 col-sm-12 col-xs-12 mb16">
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <div>
                                        <h3><t t-esc="reseller.name"/></h3>
                                    </div>
                                </div>
                                <div class="col-md-6 col-sm-6 col-xs-12">
                                    <div>
                                        <p><strong>Telephone</strong> <span class="text-muted" t-esc="reseller.phone"/></p>
                                        <p><strong>Website</strong> <span class="text-muted" t-esc="reseller.website"/></p>
                                        <p><strong>E-Mail</strong> <span class="text-muted" t-esc="reseller.email"/></p>
                                        <p><strong>Address</strong> <span class="text-muted" t-esc="reseller.street"/><t t-if="reseller.zip"><span class="text-muted" t-esc="', %s' %reseller.zip"/></t> <t t-if="reseller.city"><span class="text-muted" t-esc="reseller.city"/></t></p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_structure"/>
                <div class="col-md-6 col-sm-6 col-xs-12">
                    <!-- Google maps -->
                    <div id="map" class="mt64" style="width: 100%; height: 800px;"></div>
                </div>
                <script>
                  function initMap() {
                    var sweden = {lat: 59.6144081, lng: 17.7168579};
                    var map = new google.maps.Map(document.getElementById('map'), {
                      zoom: 4,
                      center: sweden
                    });
                    <t t-foreach="resellers_geo" t-as="geo"><t t-raw="geo"/></t>
                  }
                </script>
                <script t-att-src="'https://maps.googleapis.com/maps/api/js?key=%s&amp;callback=initMap' %request.env['ir.config_parameter'].get_param('google_maps_api')"></script>
            </t>
        </template>

        <template id="resellers_city" name="Resellers City">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure"/>
                    <div class="container">
                        <div class="row">
                            <t t-call="reseller_dermanord.view_type"/>
                            <div class="col-md-12 col-sm-12 col-xs-12 mb16">
                                <t t-if="len(cities) &gt; 0">
                                    <t t-foreach="cities" t-as="city">
                                        <div class="col-md-4 col-sm-4 col-xs-12">
                                            <h4><strong><t t-esc="city"/></strong></h4>
                                            <t t-foreach="resellers.with_context({'city': city}).filtered(lambda p: p.city == p._context.get('city'))" t-as="reseller">
                                                <a t-att-href="'/reseller/%s' %reseller.id">
                                                    <p t-esc="reseller.name"/>
                                                </a>
                                            </t>
                                        </div>
                                    </t>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_structure"/>
            </t>
        </template>

        <template id="resellers_country" name="Resellers Country">
            <t t-call="website.layout">
                <div id="wrap">
                    <div class="oe_structure"/>
                    <div class="container">
                        <div class="row">
                            <t t-call="reseller_dermanord.view_type"/>
                            <div class="col-md-12 col-sm-12 col-xs-12 mb16">
                                <t t-if="len(countries) &gt; 0">
                                    <t t-foreach="countries" t-as="country_id">
                                        <div class="col-md-4 col-sm-4 col-xs-12">
                                            <h4><strong><t t-esc="country_id.name"/></strong></h4>
                                            <t t-foreach="resellers.with_context({'country_id': country_id}).filtered(lambda p: p.country_id == p._context.get('country_id'))" t-as="reseller">
                                                <a t-att-href="'/reseller/%s' %reseller.id">
                                                    <p t-esc="reseller.name"/>
                                                </a>
                                            </t>
                                        </div>
                                    </t>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="oe_structure"/>
            </t>
        </template>

        <template id="customize_css_js" inherit_id="website.layout" name="Customize CSS JS">
            <!-- Customize css -->
            <xpath expr="//t[@t-call-assets='website.assets_frontend']" position="after">
                <link href="/reseller_dermanord/static/src/css/main.css" rel="stylesheet" />
            </xpath>
            <!-- Customize javascript -->
            <xpath expr="//body" position="inside">
                <script type="text/javascript" src="/reseller_dermanord/static/src/js/main.js" />
            </xpath>
        </template>

    </data>
</openerp>
