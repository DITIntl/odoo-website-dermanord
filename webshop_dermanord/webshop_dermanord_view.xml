<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="dermanord_product_detail" inherit_id="website_sale.product">
            <xpath expr="//p[@t-field='product.description_sale']" position="after">
                <t t-set="variant" t-value="product.product_variant_ids[0]"/><!-- TODO: find method that get the product vairant -->
                <hr/>
                <div class="col-md-12 no_padding_div">
                    <div class="col-md-4 no_padding_div">
                        <ul class="nav nav-pills nav-stacked">
                            <li class="active"><a data-toggle="tab" href="#remedy">Remedy</a></li>
                            <li><a data-toggle="tab" href="#skin_type">Skin Type</a></li>
                            <li><a data-toggle="tab" href="#texture">Texture</a></li>
                            <li group="base.group_public"><a data-toggle="tab" href="#public_desc">Description</a></li>
                            <li groups="base.group_website_publisher"><a data-toggle="tab" href="#reseller_desc">Description</a></li>
                            <li><a data-toggle="tab" href="#use_desc">Manual</a></li>
                            <li><a data-toggle="tab" href="#ingredients">Ingredients</a></li>
                        </ul>
                    </div>
                    <div class="tab-content col-md-8 no_padding_div">
                        <div id="remedy" t-if="variant.public_desc" class="tab-pane fade in active">
                            <p>Massage, Skin Care</p>
                        </div>
                        <div id="skin_type" t-if="variant.public_desc" class="tab-pane fade in active">
                            <p>Dry, Oily, Normal</p>
                        </div>
                        <div id="texture" t-if="variant.public_desc" class="tab-pane fade in active">
                            <p>Oily</p>
                        </div>
                        <div id="public_desc" t-if="variant.public_desc" class="tab-pane fade in active"><!-- TODO: find method that check if current user is a customer -->
                            <p t-field="variant.public_desc" class="oe_structure text-muted"/>
                        </div>
                        <div id="reseller_desc" t-if="variant.reseller_desc" class="tab-pane fade in"><!-- TODO: find method that check if current user is a saller -->
                            <p t-field="variant.reseller_desc" class="oe_structure text-muted"/>
                        </div>
                        <div id="use_desc" t-if="variant.use_desc" class="tab-pane fade in">
                            <p t-field="variant.use_desc" class="oe_structure text-muted"/>
                        </div>
                        <div id="ingredients" t-if="variant.ingredients" class="tab-pane fade in">
                            <p t-field="variant.ingredients" class="oe_structure text-muted"/>
                        </div>
                    </div>
                </div>
                <hr/>
            </xpath>
            <xpath expr="//div[@itemprop='description']" position="after">
                <div class="oe_structure oe_empty mt32 mb32">
                    <h1 class="text-center">This productâ€™s experiences</h1>
                    <h1 class="text-center">Product range</h1>
                    <h1 class="text-center">Recently viewed</h1>
                    <div class=".oe_vertel_product_gridbox">
                    <t t-foreach="website.sale_get_previous_products()" t-as="product">
                        <t t-call="website_product_templates.product_view"/>
                    </t>
                    </div>
                </div>
            </xpath>
        </template>
        
        <!-- Produktvisning enskild produkt -->
        <template id="website_product_templates.product_view" name="Product View">
            <t t-set="product_view_width" t-value="250"/>
            <t t-set="product_view_heigth" t-value="150"/>
          <div class="thumbnail oe_vertel_product_view_box" t-att-style="'%s %s' % (('width: %spx;' % product_view_width) if product_view_width else '', ('height: %spx;' % product_view_heigth) if product_view_heigth else '')">
            <div class='mt16 text-center'>
              <span t-field="product.image_small" t-field-options='{"widget": "image", "class": "img-rounded shadow" }'/>
              <h5>
                <a t-attf-href="/shop/product/#{ slug(product) }" style="display: block">
                  <span t-field='product.name' style="display: block"/>
                </a>
              </h5>
              <b>
                <t t-if="(compute_currency(product.lst_price) - product.price) &gt; 0.1">
                  <del class="text-danger oe_vertel_product_view_old_price" t-field="product.lst_price" t-field-options='{
                    "widget": "monetary",
                    "from_currency": "product.company_id.currency_id",
                    "display_currency": "user_id.partner_id.property_product_pricelist.currency_id"
                  }'/>&amp;nbsp;
                </t>
                <span class="oe_vertel_product_view_price" t-field="product.price" t-field-options='{
                     "widget": "monetary",
                     "display_currency": "user_id.partner_id.property_product_pricelist.currency_id"
                 }'>
                </span>
              </b>
              </div>
          </div>
        </template>
        
        <template id="webshop_dermanord" inherit_id="website.layout" name="Webshop Dermanord">
        <!-- Customize css -->
            <xpath expr="//t[@t-call-assets='website.assets_frontend']" position="before">
                <link href="/webshop_dermanord/static/src/css/webshop_dermanord.css" rel="stylesheet" />
            </xpath>
            <!-- Customize javascript -->
            <xpath expr="//body/script[last()]" position="after">
                <script type="text/javascript" src="/webshop_dermanord/static/src/img/webshop_dermanord.js" />
            </xpath>
        </template>
    </data>
</openerp>
